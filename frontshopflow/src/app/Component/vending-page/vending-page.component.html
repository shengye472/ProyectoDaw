<div class="container-fluid">
  <div class="row border border-light rounded-4 overflow-hidden mt-4">

    <div>
            <form [formGroup]="searchForm" (submit)="getDetail()"  class="d-flex">
                <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Buscador </mat-label>
                    <input matInput placeholder="codigo de barras..." formControlName="barCode" >
                </mat-form-field>
                <button mat-fab type="submit" [disabled]="searchForm.invalid" class="mx-2">
                    <mat-icon>search</mat-icon>
                </button>
            </form>
        </div>

    <div class="col-10 d-flex">
      <div class="flex-fill border-end border-light p-3 min-vh-50">
        <table class="table table-striped table-bordered table-hover">
          <thead class="table-primary"> 
            <tr>
            <th>Codigo de Barras</th>
              <th>Producto</th>
              <th>Cantidad</th>
              <th>Precio</th>
              <th>Subtotal</th>
              <th>&nbsp;</th>
            </tr>
          </thead>
          <tbody>
            @for (detail of listOfDetails; track detail.products.barCode) {
            <tr>
              <td>{{ detail.products.barCode }}</td>
              <td>{{ detail.products.name }}</td>
              <td>{{ detail.quantity }}</td>
              <td>{{ detail.products.price_sell }}€</td>
              <td>{{ detail.subtotal }}€</td>
                <td class="text-center">
                    <button mat-button class="cancel" (click)="removeDetail(detail.products.barCode)">Borrar</button>
                </td>
            </tr>
            }
          </tbody>
        </table>
      </div>
    </div>

    <div class="col-2 border-start border-light text-center py-3">
      <div class="border-bottom pb-2 mb-2">
        <h4>Total</h4>
        <div>{{ TotalAmount }}€</div>
      </div>
      <button mat-button (click)="sendSale()">Guardar</button>
    </div>

  </div>


</div>
